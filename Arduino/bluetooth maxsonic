#include <SoftwareSerial.h>
SoftwareSerial EEBlue(10, 11); // RX | TX

const int pwPin1 = 2;
const int pwPin2 = 3;

long pulse1, sensor1;
long pulse2, sensor2;
long sensoryht,objekti;

void setup () 
{
  Serial.begin(9600);
  pinMode(pwPin1, INPUT);
  delay(1);
  pinMode(pwPin2, INPUT);
  EEBlue.begin(9600); 
  Serial.println("Bluetooth UP pincode:9898");

}

void read_sensor()
{
  pulse1 = pulseIn(pwPin1, HIGH);
  pulse2 = pulseIn(pwPin2, HIGH);
  sensor1 = pulse1 / 29 / 2;
  sensor2 = pulse2 / 29 / 2;
  sensoryht=sensor1+sensor2;
  objekti=265-sensoryht;
}
void printall()
{
  Serial.println("\n1.Pari");           
  Serial.print("Sensor1=");
  Serial.println(sensor1);
  Serial.print("Sensor2=");
  Serial.println(sensor2);
  Serial.print("Leveys=");
  Serial.println(objekti);
}
void bluetooth()
{
  if (EEBlue.available())
    Serial.print(EEBlue.read());
  if (Serial.available())
    EEBlue.write(Serial.read());
}
void bluetoothtrig()
{
  EEBlue.write("DPR Start");
  EEBlue.write(objekti);
  EEBlue.write("DPR END");
}

void loop () 
{
  bluetooth();
  read_sensor();
  if(objekti<260)
  {
  printall();
  bluetoothtrig();
  }
  else{read_sensor();}
  delay(500);
}
